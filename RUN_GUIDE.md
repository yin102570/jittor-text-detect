# Jittor DetectGPT è¿è¡ŒæŒ‡å—

## å·²å®Œæˆçš„ä¿®å¤

### 1. æ ·æœ¬æ•°é‡é—®é¢˜
- âœ… å·²å†…ç½® 100 æ¡äººç±»æ–‡æœ¬å’Œ 100 æ¡ AI æ–‡æœ¬ï¼ˆå…± 200 æ¡ï¼‰
- âœ… é™ä½äº†æ–‡æœ¬é•¿åº¦è¿‡æ»¤è¦æ±‚ï¼ˆä» 50 å­—ç¬¦æ”¹ä¸º 10 å­—ç¬¦ï¼‰
- âœ… è°ƒæ•´äº†é»˜è®¤å‚æ•°ï¼ˆmax_raw_data=200, min_samples=10ï¼‰
- âœ… æ•°æ®éªŒè¯å·²é€šè¿‡æµ‹è¯•ï¼ˆè§ test_data_loading.pyï¼‰

### 2. æ ¸å¿ƒä¿®å¤å†…å®¹

#### run.py (ä¸»å…¥å£æ–‡ä»¶)
- ç¬¬ 248-249 è¡Œï¼šå°†æœ€å°æ ·æœ¬è¦æ±‚ä» 20 æ”¹ä¸ºä½¿ç”¨å‚æ•° min_samplesï¼ˆé»˜è®¤ 10ï¼‰
- ç¬¬ 354 è¡Œï¼šé»˜è®¤ min_samples ä» 20 æ”¹ä¸º 10
- ç¬¬ 331 è¡Œï¼šé»˜è®¤ max_raw_data ä» 100 æ”¹ä¸º 200

#### detectGPT.py (æ£€æµ‹ç®—æ³•)
- ç¬¬ 36-37 è¡Œï¼šå°†æ–‡æœ¬é•¿åº¦éªŒè¯ä» >50 æ”¹ä¸º >10 å­—ç¬¦

## è§£å†³ Jittor ç¼–è¯‘é—®é¢˜

### é—®é¢˜åŸå› 
Jittor åœ¨ Windows ä¸Šé¦–æ¬¡è¿è¡Œéœ€è¦ç¼–è¯‘ C++ ä»£ç ï¼Œå¦‚æœæ²¡æœ‰å®‰è£… Microsoft C++ Build Tools ä¼šæŠ¥é”™ã€‚

### è§£å†³æ–¹æ¡ˆï¼ˆæ¨èä½¿ç”¨ WSL2ï¼‰

#### æ­¥éª¤ 1ï¼šå¯ç”¨ WSL2
åœ¨ PowerShellï¼ˆç®¡ç†å‘˜ï¼‰ä¸­è¿è¡Œï¼š
```powershell
wsl --install
```
é‡å¯ç”µè„‘åæŒ‰æç¤ºè®¾ç½® Ubuntu ç”¨æˆ·åå’Œå¯†ç ã€‚

#### æ­¥éª¤ 2ï¼šåœ¨ WSL2 ä¸­å®‰è£…ä¾èµ–
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£… Python å’Œ pip
sudo apt install python3 python3-pip python3-venv -y

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£… Jittor å’Œä¾èµ–
pip install jittor==1.3.10
pip install -r requirements.txt
```

#### æ­¥éª¤ 3ï¼šè¿è¡Œé¡¹ç›®
```bash
cd /mnt/d/HuaweiMoveData/Users/asdf1/Desktop/jittor-text-detect
python run.py --dataset builtin --max_raw_data 200 --min_samples 10 --DEVICE cpu
```

### æ›¿ä»£æ–¹æ¡ˆï¼šä½¿ç”¨ Microsoft C++ Build Tools

å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ WSL2ï¼Œå¯ä»¥å®‰è£… Windows ä¸Šçš„ç¼–è¯‘å·¥å…·ï¼š

1. ä¸‹è½½ [Microsoft C++ Build Tools](https://visualstudio.microsoft.com/visual-cpp-build-tools/)
2. å®‰è£…æ—¶é€‰æ‹© "Desktop development with C++"
3. ç¡®ä¿å®‰è£… Windows 10/11 SDK
4. é‡å¯åé‡æ–°å®‰è£… Jittor

## å¿«é€Ÿæµ‹è¯•å‘½ä»¤

### 1. æ•°æ®åŠ è½½æµ‹è¯•ï¼ˆæ— éœ€æ¨¡å‹ï¼‰
```bash
cd d:/HuaweiMoveData/Users/asdf1/Desktop/jittor-text-detect
python test_data_loading.py
```

é¢„æœŸè¾“å‡ºï¼š
```
[OK] åŠ è½½å¸¦æ ‡ç­¾æ•°æ®ï¼šäººç±»æ–‡æœ¬ 50 æ¡ï¼ŒAIæ–‡æœ¬ 50 æ¡
[INFO] æ€»æ ·æœ¬æ•°ï¼š100 æ¡
[OK] æ•°æ®æ ¼å¼æœ‰æ•ˆ
[OK] æµ‹è¯•é€šè¿‡: æ ·æœ¬æ•°é‡å……è¶³
```

### 2. å®Œæ•´å®éªŒè¿è¡Œï¼ˆéœ€è¦è§£å†³ Jittor ç¼–è¯‘é—®é¢˜ï¼‰

#### CPU æ¨¡å¼ï¼ˆæœ€ç®€å•ï¼Œä½†é€Ÿåº¦æ…¢ï¼‰
```bash
python run.py \
    --dataset builtin \
    --max_raw_data 100 \
    --min_samples 10 \
    --DEVICE cpu \
    --debug
```

#### GPU æ¨¡å¼ï¼ˆå¦‚æœå¯ç”¨ï¼Œé€Ÿåº¦å¿«ï¼‰
```bash
python run.py \
    --dataset builtin \
    --max_raw_data 200 \
    --min_samples 10 \
    --DEVICE gpu \
    --n_perturbation_rounds 10
```

### 3. å¿«é€Ÿæµ‹è¯•ï¼ˆ10 ä¸ªæ ·æœ¬ï¼‰
```bash
python run.py \
    --dataset builtin \
    --max_raw_data 20 \
    --min_samples 10 \
    --DEVICE cpu \
    --n_perturbation_rounds 3
```

## å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--dataset` | builtin | ä½¿ç”¨å†…ç½®æ•°æ®ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰ |
| `--max_raw_data` | 200 | åŠ è½½çš„æ€»æ ·æœ¬æ•°ï¼ˆäººç±»+AIï¼‰ |
| `--min_samples` | 10 | æœ€å°æ ·æœ¬è¦æ±‚ |
| `--DEVICE` | auto | è¿è¡Œè®¾å¤‡ï¼šcpu/gpu/auto |
| `--base_model_name` | gpt2 | åŸºç¡€æ¨¡å‹ |
| `--mask_filling_model_name` | t5-small | æ©ç å¡«å……æ¨¡å‹ |
| `--n_perturbation_rounds` | 5 | æ‰°åŠ¨è½®æ•°ï¼ˆè¶Šå¤šè¶Šå‡†ç¡®ä½†è¶Šæ…¢ï¼‰ |
| `--debug` | False | å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ˆæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼‰ |

## é¢„æœŸè¿è¡Œæµç¨‹

### é˜¶æ®µ 1ï¼šåˆå§‹åŒ–
```
âœ… Jittorè‡ªåŠ¨é€‚é…è®¾å¤‡: CPU (æˆ– GPU)
ğŸ“ ä¿å­˜ç»“æœåˆ°: ./tmp_results/...
Using cache dir ./cache
```

### é˜¶æ®µ 2ï¼šæ•°æ®åŠ è½½
```
ğŸ“¥ æ­£åœ¨åŠ è½½å†…ç½®æ•°æ®...
[OK] åŠ è½½å¸¦æ ‡ç­¾æ•°æ®ï¼šäººç±»æ–‡æœ¬ 50 æ¡ï¼ŒAIæ–‡æœ¬ 50 æ¡
ğŸ” å¼€å§‹æ•°æ®æœ‰æ•ˆæ€§æ ¡éªŒ...
âœ… æ•°æ®æ ¼å¼æœ‰æ•ˆ: åŒ…å« 50 æ¡äººç±»æ–‡æœ¬ï¼Œ50 æ¡AIæ–‡æœ¬
```

### é˜¶æ®µ 3ï¼šæ¨¡å‹æ¨ç†
```
âœ… å·²å¤„ç† 10/50 æ¡æ–‡æœ¬ï¼Œå½“å‰LL=-2.1234
âœ… LikelihoodScorerè¿›åº¦: 50/100 (50.0%)
```

### é˜¶æ®µ 4ï¼šç»“æœè¾“å‡º
```
ğŸ¯ æœ€ç»ˆç»“æœ:
ROC AUC: 0.7800
PR AUC: 0.7500
ğŸ’¾ æ­£åœ¨ä¿å­˜ç»“æœ...
âœ… æ‰€æœ‰ç»“æœå·²ä¿å­˜åˆ°: ...
```

## å¸¸è§é—®é¢˜

### Q1: Jittor ç¼–è¯‘å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**A:** æ¨èä½¿ç”¨ WSL2 æ–¹æ¡ˆï¼Œåœ¨ Linux ç¯å¢ƒä¸‹è¿è¡Œæ›´ç¨³å®šã€‚è¯¦è§ä¸Šæ–¹"è§£å†³ Jittor ç¼–è¯‘é—®é¢˜"éƒ¨åˆ†ã€‚

### Q2: æ ·æœ¬æ•°é‡ä»ç„¶ä¸è¶³ï¼Ÿ
**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®ä¿ `--max_raw_data` å‚æ•° â‰¥ 20
2. æ£€æŸ¥ `--min_samples` å‚æ•°æ˜¯å¦è®¾ç½®è¿‡é«˜
3. è¿è¡Œ `test_data_loading.py` éªŒè¯æ•°æ®åŠ è½½é€»è¾‘

### Q3: è¿è¡Œé€Ÿåº¦å¤ªæ…¢ï¼Ÿ
**A:** å¯ä»¥å°è¯•ï¼š
1. ä½¿ç”¨ GPU æ¨¡å¼ï¼š`--DEVICE gpu`
2. å‡å°‘æ ·æœ¬æ•°ï¼š`--max_raw_data 40`
3. å‡å°‘æ‰°åŠ¨è½®æ•°ï¼š`--n_perturbation_rounds 3`

### Q4: æ¨¡å‹ä¸‹è½½å¤±è´¥ï¼Ÿ
**A:** å¯ä»¥ï¼š
1. é…ç½®é•œåƒæºåŠ é€Ÿä¸‹è½½
2. æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹åæ”¾ç½®åˆ° `~/.cache/huggingface/hub/`
3. ä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼ˆå¦‚ `gpt2-small`ï¼‰

## é¡¹ç›®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `run.py` | ä¸»å…¥å£æ–‡ä»¶ï¼ŒåŒ…å«æ•°æ®åŠ è½½å’Œå®éªŒæµç¨‹ |
| `test_data_loading.py` | æ•°æ®åŠ è½½æµ‹è¯•è„šæœ¬ï¼ˆæ— éœ€æ¨¡å‹ï¼‰ |
| `utils/baselines/detectGPT.py` | DetectGPT æ ¸å¿ƒç®—æ³•å®ç° |
| `utils/baselines/model.py` | è¯„åˆ†å™¨å®ç°ï¼ˆä¼¼ç„¶åº¦ã€æ‰°åŠ¨ï¼‰ |
| `utils/baselines/metric.py` | è¯„ä¼°æŒ‡æ ‡è®¡ç®—ï¼ˆAUCã€PRï¼‰ |
| `JITTOR_WINDOWS_SETUP.md` | Jittor Windows é…ç½®è¯¦ç»†æŒ‡å— |

## ä¸‹ä¸€æ­¥å»ºè®®

1. **å…ˆæµ‹è¯•æ•°æ®åŠ è½½**ï¼šè¿è¡Œ `test_data_loading.py` ç¡®è®¤æ•°æ®æ­£å¸¸
2. **è§£å†³ Jittor ç¼–è¯‘é—®é¢˜**ï¼šä½¿ç”¨ WSL2 æˆ–å®‰è£… C++ Build Tools
3. **å°è§„æ¨¡æµ‹è¯•**ï¼šä½¿ç”¨ `--max_raw_data 20 --n_perturbation_rounds 3` å¿«é€ŸéªŒè¯
4. **å®Œæ•´å®éªŒ**ï¼šä½¿ç”¨é»˜è®¤å‚æ•°è¿è¡Œå®Œæ•´å®éªŒ
5. **ç»“æœåˆ†æ**ï¼šæŸ¥çœ‹ `tmp_results/` ä¸­çš„ç»“æœæ–‡ä»¶

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
2. è¿è¡Œå‘½ä»¤å’Œå‚æ•°
3. ç³»ç»Ÿï¼ˆWindows/WSL2ï¼‰å’Œ Python ç‰ˆæœ¬
4. Jittor ç‰ˆæœ¬ï¼ˆ`python -c "import jittor; print(jittor.__version__)"`ï¼‰
